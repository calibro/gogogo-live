<div layout="row" layout-sm="column">
	<div flex>
		<div layout="column">
		<div map></div>
		<md-whiteframe class="md-whiteframe-z1" layout="row" id="infoBar" layout-align="space-between center">
    	<div ng-if="errors">
    		<p><b>{{errors}}</b></p>
    	</div>
    	<div ng-if="!selectedTeam && !errors">
    		<p>The last route for each one of <b>{{totalTeams}}</b> teams is displayed</p>
    	</div>
    	<div ng-if="selectedTeam">
    		<p>
    			<b>{{selectedTeamRoutes}}</b> routes of the team <b>{{selectedTeam}}</b> are displayed 
    			<md-button class="md-warn" ng-click="teamClear()">back to all</md-button>
    		</p>
    	</div>
    	<div>
    		<p>

    			<md-switch ng-model="autoupdate" class="md-warn" ng-change="onAutoupdateChange(autoupdate)">
    			autoupdate
  				</md-switch>
    		</p>
    	</div>
  	</md-whiteframe>
		</div>
	</div>
	<div flex>
		<md-tabs md-selected="selectedIndex" id="transportationTab">
		<md-tab ng-if="routes[0]" label="{{methods[0] | parseTitles}}">
    			<md-toolbar md-scroll-shrink id="routeFilter">
    			 <div layout="row" layout-sm="column" layout-align="space-around center">
        <md-input-container>
          <label>Top Teams</label>
          <input ng-model="lastNofTeams">
        </md-input-container>
        <md-input-container>
          <label>Routes per team</label>
          <input ng-model="lastNofRoutes">
        </md-input-container>
          <md-input-container>
          <label>Search team</label>
          <input ng-model="search.key">
        </md-input-container>
        </div>
    		</md-toolbar>

			<md-content ng-style="{height: windowHeight}">
				<section class="pushpush" ng-repeat="team in routes[0].values | orderBy:'values.length':true | filter:search | limitTo: lastNofTeams">
					<md-subheader>
						<div layout="row" layout-align="space-between center">
						  <div>
								<span class="teamNumber">{{team.key}}</span> total routes: {{team.values.length}}
							</div>
						  <div class="teamInfo">
								<md-button class="md-fab md-warn" ng-click="teamSubmit(team.key)" aria-label="view on the map">
					      GO!
					        <md-tooltip>
          					view on the map
        					</md-tooltip>
					      </md-button>
						  </div>
						</div>
					</md-subheader>
					<md-list layout="column">
						<md-item ng-repeat="route in team.values | orderBy:sortDate:true | limitTo: lastNofRoutes">
							<md-item-content class="singleRoute">
								<div class="md-tile-left">
								<div minimap route="route.route"></div>
								</div>
								<div class="md-tile-content">
									<p class="singleRouteNumber">
									route #{{$index+1}}
									</p>
									<h2><span ng-bind-html="route.kilometers | pathlenght"></span> <span class="conjunction">in</span> <span ng-if="route.time.minutes >= 1">{{route.time.minutes}}<span class="merry">min</span> <span class="conjunction">and</span> </span>{{route.time.seconds}}<span class="merry">sec</span></h2>
									<p>
										{{route.route[route.route.length -1].timestamp | parseDate}}
									</p>
								</div>
							</md-item-content>
						</md-item>
					</md-list>
				</section>
			</md-content>
		</md-tab>
		<md-tab ng-if="routes[1]" label="{{methods[1] | parseTitles}}">
    			<md-toolbar md-scroll-shrink id="routeFilter">
    			 <div layout="row" layout-sm="column" layout-align="space-around center">
        <md-input-container>
          <label>Top Teams</label>
          <input ng-model="lastNofTeams">
        </md-input-container>
        <md-input-container>
          <label>Routes per team</label>
          <input ng-model="lastNofRoutes">
        </md-input-container>
          <md-input-container>
          <label>Search team</label>
          <input ng-model="search.key">
        </md-input-container>
        </div>
    		</md-toolbar>

			<md-content ng-style="{height: windowHeight}">
				<section class="pushpush" ng-repeat="team in routes[1].values | orderBy:'values.length':true | filter:search | limitTo: lastNofTeams">
					<md-subheader>
						<div layout="row" layout-align="space-between center">
						  <div>
								<span class="teamNumber">{{team.key}}</span> total routes: {{team.values.length}}
							</div>
						  <div class="teamInfo">
								<md-button class="md-fab md-warn" ng-click="teamSubmit(team.key)" aria-label="view on the map">
					      GO!
					        <md-tooltip>
          					view on the map
        					</md-tooltip>
					      </md-button>
						  </div>
						</div>
					</md-subheader>
					<md-list layout="column">
						<md-item ng-repeat="route in team.values | orderBy:sortDate:true |limitTo: lastNofRoutes">
							<md-item-content class="singleRoute">
								<div class="md-tile-left">
								<div minimap route="route.route"></div>
								</div>
								<div class="md-tile-content">
									<p class="singleRouteNumber">
									route #{{$index+1}}
									</p>
									<h2><span ng-bind-html="route.kilometers | pathlenght"></span> <span class="conjunction">in</span> <span ng-if="route.time.minutes >= 1">{{route.time.minutes}}<span class="merry">min</span> <span class="conjunction">and</span> </span>{{route.time.seconds}}<span class="merry">sec</span></h2>
									<p>
										{{route.route[route.route.length -1].timestamp | parseDate}}
									</p>
								</div>
							</md-item-content>
						</md-item>
					</md-list>
				</section>
			</md-content>
		</md-tab>
		<md-tab ng-if="routes[2]" label="{{methods[2] | parseTitles}}">
    			<md-toolbar md-scroll-shrink id="routeFilter">
    			 <div layout="row" layout-sm="column" layout-align="space-around center">
        <md-input-container>
          <label>Top Teams</label>
          <input ng-model="lastNofTeams">
        </md-input-container>
        <md-input-container>
          <label>Routes per team</label>
          <input ng-model="lastNofRoutes">
        </md-input-container>
          <md-input-container>
          <label>Search team</label>
          <input ng-model="search.key">
        </md-input-container>
        </div>
    		</md-toolbar>

			<md-content ng-style="{height: windowHeight}">
				<section class="pushpush" ng-repeat="team in routes[2].values | orderBy:'values.length':true | filter:search | limitTo: lastNofTeams">
					<md-subheader>
						<div layout="row" layout-align="space-between center">
						  <div>
								<span class="teamNumber">{{team.key}}</span> total routes: {{team.values.length}}
							</div>
						  <div class="teamInfo">
								<md-button class="md-fab md-warn" ng-click="teamSubmit(team.key)" aria-label="view on the map">
					      GO!
					        <md-tooltip>
          					view on the map
        					</md-tooltip>
					      </md-button>
						  </div>
						</div>
					</md-subheader>
					<md-list layout="column">
						<md-item ng-repeat="route in team.values | orderBy:sortDate:true |limitTo: lastNofRoutes">
							<md-item-content class="singleRoute">
								<div class="md-tile-left">
								<div minimap route="route.route"></div>
								</div>
								<div class="md-tile-content">
									<p class="singleRouteNumber">
									route #{{$index+1}}
									</p>
									<h2><span ng-bind-html="route.kilometers | pathlenght"></span> <span class="conjunction">in</span> <span ng-if="route.time.minutes >= 1">{{route.time.minutes}}<span class="merry">min</span> <span class="conjunction">and</span> </span>{{route.time.seconds}}<span class="merry">sec</span></h2>
									<p>
										{{route.route[route.route.length -1].timestamp | parseDate}}
									</p>
								</div>
							</md-item-content>
						</md-item>
					</md-list>
				</section>
			</md-content>
		</md-tab>
		</md-tabs>
	</div>
</div>